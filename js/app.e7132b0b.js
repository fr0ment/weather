(function(){"use strict";var e={4393:function(e,t,i){var a=i(5130),r=i(6768),n=i(4232);const o={id:"app"},u={for:"language"},s=["value"],l={key:1},c=["onClick"],d={for:"unit"},v={key:2,class:"weather-info"},h=["src"],p={key:3};function f(e,t,i,f,g,m){const y=(0,r.g2)("WeatherForecast");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("h1",null,(0,n.v_)(e.$t("weatherApp")),1),(0,r.Lk)("div",null,[(0,r.Lk)("label",u,(0,n.v_)(e.$t("language")),1),(0,r.bo)((0,r.Lk)("select",{id:"language","onUpdate:modelValue":t[0]||(t[0]=e=>g.currentLanguage=e),onChange:t[1]||(t[1]=(...e)=>m.changeLanguage&&m.changeLanguage(...e))},t[6]||(t[6]=[(0,r.Lk)("option",{value:"en"},"English",-1),(0,r.Lk)("option",{value:"ru"},"Русский",-1)]),544),[[a.u1,g.currentLanguage]])]),(0,r.Lk)("span",null,(0,n.v_)(e.$t("selectCity")),1),t[11]||(t[11]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("select",{onChange:t[2]||(t[2]=e=>m.refresh(e.target.value)),"onUpdate:modelValue":t[3]||(t[3]=e=>g.selectedCityId=e)},[t[7]||(t[7]=(0,r.Lk)("option",{value:"520494"},"Нижний Тагил",-1)),t[8]||(t[8]=(0,r.Lk)("option",{value:"1511954"},"Алапаевск",-1)),t[9]||(t[9]=(0,r.Lk)("option",{value:"524901"},"Москва",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(g.favoriteCities,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,s)))),128))],544),[[a.u1,g.selectedCityId]]),g.weatherData?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[4]||(t[4]=e=>m.addFavoriteCity(g.weatherData.city))},(0,n.v_)(e.$t("addToFavorites")),1)):(0,r.Q3)("",!0),g.favoriteCities.length>0?((0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("h3",null,(0,n.v_)(e.$t("favoriteCities")),1),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(g.favoriteCities,(t=>((0,r.uX)(),(0,r.CE)("li",{key:t.id},[(0,r.eW)((0,n.v_)(t.name)+" ",1),(0,r.Lk)("button",{onClick:e=>m.removeFavoriteCity(t.id)},(0,n.v_)(e.$t("remove")),9,c)])))),128))])])):(0,r.Q3)("",!0),(0,r.Lk)("div",null,[(0,r.Lk)("label",d,(0,n.v_)(e.$t("unit")),1),(0,r.bo)((0,r.Lk)("select",{id:"unit","onUpdate:modelValue":t[5]||(t[5]=e=>g.unit=e)},t[10]||(t[10]=[(0,r.Lk)("option",{value:"celsius"},"°C",-1),(0,r.Lk)("option",{value:"fahrenheit"},"°F",-1)]),512),[[a.u1,g.unit]])]),g.weatherData?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("h2",null,(0,n.v_)(e.$t("weatherApp"))+" - "+(0,n.v_)(g.weatherData.city.name),1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("temperature"))+": "+(0,n.v_)(m.convertTemperature(g.weatherData.list[0].main.temp))+" "+(0,n.v_)(m.unitSymbol),1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("condition"))+": "+(0,n.v_)(g.weatherData.list[0].weather[0].description),1),(0,r.Lk)("img",{src:`https://openweathermap.org/img/wn/${g.weatherData.list[0].weather[0].icon}@2x.png`,alt:"Weather Icon"},null,8,h),(0,r.Lk)("p",null,(0,n.v_)(e.$t("humidity"))+": "+(0,n.v_)(g.weatherData.list[0].main.humidity)+"%",1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("pressure"))+": "+(0,n.v_)(g.weatherData.list[0].main.pressure)+" hPa",1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("wind"))+": "+(0,n.v_)(g.weatherData.list[0].wind.speed)+" м/с, "+(0,n.v_)(m.getWindDirection(g.weatherData.list[0].wind.deg)),1),(0,r.Lk)("h3",null,(0,n.v_)(e.$t("weatherForecast")),1),g.forecastData?((0,r.uX)(),(0,r.Wv)(y,{key:0,forecast:g.forecastData,getWindDirection:m.getWindDirection,unit:g.unit},null,8,["forecast","getWindDirection","unit"])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("p",p,(0,n.v_)(e.$t("loading")),1))])}i(4114);const g={class:"weather-forecast"},m=["src","alt"];function y(e,t,i,a,o,u){return(0,r.uX)(),(0,r.CE)("div",g,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.forecast,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t.dt,class:"forecast-day"},[(0,r.Lk)("p",null,(0,n.v_)(e.$t("forecast.date"))+" "+(0,n.v_)(u.formatDate(t.dt)),1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("forecast.temperature"))+": "+(0,n.v_)(u.convertTemperature(t.main.temp))+" "+(0,n.v_)(u.unitSymbol),1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("forecast.condition"))+": "+(0,n.v_)(t.weather[0].description),1),(0,r.Lk)("img",{src:`https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,alt:e.$t("forecast.condition")},null,8,m),(0,r.Lk)("p",null,(0,n.v_)(e.$t("forecast.humidity"))+": "+(0,n.v_)(t.main.humidity)+"%",1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("forecast.pressure"))+": "+(0,n.v_)(t.main.pressure)+" hPa",1),(0,r.Lk)("p",null,(0,n.v_)(e.$t("forecast.wind"))+": "+(0,n.v_)(t.wind.speed)+" м/с, "+(0,n.v_)(i.getWindDirection(t.wind.deg)),1)])))),128))])}var C={props:{forecast:Array,getWindDirection:Function,unit:String},computed:{unitSymbol(){return"celsius"===this.unit?"°C":"°F"}},methods:{formatDate(e){return new Date(1e3*e).toLocaleDateString()},convertTemperature(e){return"celsius"===this.unit?e:9*e/5+32}}},w=i(1241);const k=(0,w.A)(C,[["render",y],["__scopeId","data-v-10388250"]]);var _=k,L={name:"App",components:{WeatherForecast:_},data(){return{weatherData:null,forecastData:null,unit:"celsius",currentLanguage:"ru",favoriteCities:[],selectedCityId:""}},computed:{unitSymbol(){return"celsius"===this.unit?"°C":"°F"}},watch:{unit(){this.weatherData&&this.refresh(this.weatherData.city.id)},favoriteCities:{handler(e){localStorage.setItem("favoriteCities",JSON.stringify(e))},deep:!0},selectedCityId(e){e&&(this.refresh(e),localStorage.setItem("selectedCityId",e))}},methods:{async refresh(e){this.weatherData=null,this.forecastData=null;const t="2ad80693f04a2f391f2e7861b0836e07",i=await fetch(`https://api.openweathermap.org/data/2.5/forecast?id=${e}&units=metric&lang=ru&appid=${t}`),a=await i.json();this.weatherData=a,this.forecastData=this.getDailyForecast(a.list)},getWindDirection(e){const t=["С","СВ","В","ЮВ","Ю","ЮЗ","З","СЗ"];return t[Math.round(e/45)%8]},getDailyForecast(e){const t=e.filter((e=>e.dt_txt.includes("12:00:00")));return t},convertTemperature(e){return"celsius"===this.unit?e:9*e/5+32},addFavoriteCity(e){this.favoriteCities.some((t=>t.id===e.id))||this.favoriteCities.push(e)},removeFavoriteCity(e){this.favoriteCities=this.favoriteCities.filter((t=>t.id!==e))},loadFavoriteCities(){const e=JSON.parse(localStorage.getItem("favoriteCities"))||[];this.favoriteCities=e},changeLanguage(){this.$i18n.locale=this.currentLanguage},loadSelectedCity(){const e=localStorage.getItem("selectedCityId");this.selectedCityId=e||"520494"}},mounted(){this.loadFavoriteCities(),this.loadSelectedCity(),this.refresh(this.selectedCityId)}};const D=(0,w.A)(L,[["render",f],["__scopeId","data-v-57b90688"]]);var b=D,F=i(5931);const $={en:{weatherApp:"Weather Application",selectCity:"Select a city:",unit:"Unit of measurement:",temperature:"Temperature:",condition:"Condition:",humidity:"Humidity:",pressure:"Pressure:",wind:"Wind:",weatherForecast:"5-Day Forecast",loading:"Loading...",language:"Language:",addToFavorites:"Add to Favorites",remove:"Remove",favoriteCities:"Favorite Cities",forecast:{date:"Date:",temperature:"Temperature:",condition:"Condition:",humidity:"Humidity:",pressure:"Pressure:",wind:"Wind:",direction:"Direction:"}},ru:{weatherApp:"Приложение погоды",selectCity:"Выберите город:",unit:"Единица измерения:",temperature:"Температура:",condition:"Состояние:",humidity:"Влажность:",pressure:"Давление:",wind:"Ветер:",weatherForecast:"Прогноз на ближайшие 5 дней",loading:"Загрузка...",language:"Язык:",addToFavorites:"Добавить в избранное",remove:"Удалить",favoriteCities:"Избранные города",forecast:{date:"Дата:",temperature:"Температура:",condition:"Состояние:",humidity:"Влажность:",pressure:"Давление:",wind:"Ветер:",direction:"Направление:"}}},I=(0,F.hU)({locale:"ru",fallbackLocale:"en",messages:$});var E=I;const S=(0,a.Ef)(b);S.use(E),S.mount("#app")}},t={};function i(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,a,r,n){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],n=e[c][2];for(var u=!0,s=0;s<a.length;s++)(!1&n||o>=n)&&Object.keys(i.O).every((function(e){return i.O[e](a[s])}))?a.splice(s--,1):(u=!1,n<o&&(o=n));if(u){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,r,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,o=a[0],u=a[1],s=a[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(r in u)i.o(u,r)&&(i.m[r]=u[r]);if(s)var c=s(i)}for(t&&t(a);l<o.length;l++)n=o[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},a=self["webpackChunkmy_weather"]=self["webpackChunkmy_weather"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(4393)}));a=i.O(a)})();
//# sourceMappingURL=app.e7132b0b.js.map